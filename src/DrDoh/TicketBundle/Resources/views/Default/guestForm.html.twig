{% extends "::layout.html.twig"%}

{% block title %} 
    {{parent()}} Billetterie 
{% endblock %}

{% block body  %}
   <div class="container">
        <h2 class="text-white m-4">Bienvenue</h2> 
   
        <div class="card text-white bg-dark mb-3">
            <h3 class="card-header text-center">
            <p>
                Vous prevoyez une visite pour la {{app.session.get("choix")}} du {{app.session.get("date").date|date('d/m/Y')}} <br>
                <br>
                Indiquez vos coordonn√©es pour la reservation de {{app.session.get("ticket_qte")}} billet(s).  
            </p>
            </h3>
{# vvvvv ------------vvvvvvv---------FORMULAIRE(S) BUYER ------------vvvvvvv---------vvvvv #}
                    {{form_start(form)}}
            <div class="card-body" id="form_card">
                <div class="text-right">
                    <h4 class="text-right" id="guest_index"></h4>
                </div>    
                <div class="well">
                    <div class="text-right"><h4 class="text-right" id="guest_index">Visiteur 1</h4></div>
                        {{form_errors(form)}}
                        {# NOM + PRENOM #}
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                {{form_errors(form.lastName)}}
                                {{form_widget(form.lastName)}}
                            </div>

                            <div class="form-group col-md-6">
                                {{form_errors(form.firstName)}}
                                {{form_widget(form.firstName)}}
                            </div>
                        </div>
                        {# DATE DE NAISSANCE + REDUCTION + PAYS #}
                        <div class="form-row">
                            <div class="form-group col-md-4">
                                {{form_errors(form.birthDate)}}
                                {{form_widget(form.birthDate)}}
                            </div>
                            <div class="form-group col-md-4">
                                {{form_errors(form.discount)}}
                                {{form_widget(form.discount)}}
                            </div>
                            <div class="form-group col-md-4">
                                {{form_errors(form.country)}}
                                {{form_widget(form.country)}}
                            </div>
                        </div>
                            
                    </div>
                </div>
              
                <div class="mx-3 mb-5">
                    {{form_widget(form.save,{ 'label': 'Poursuivre','attr':{'class':'btn btn-info btn-lg btn-block'}})}}
                    {{form_rest(form)}}
                    {{form_end(form)}}
                </div>
            </div>
        </div>
    </div> 

{% endblock %}
{# vvvvv ------------vvvvvvv--------- SCRIPT JS ------------vvvvvvv---------vvvvv #} 
{% block javascripts %}
 {{parent()}}
<script type="text/javascript" src="{{ asset('js/form_generator.js') }}"></script>
<script type="text/javascript" src="{{ asset('js/ticket_price_calculator.js') }}"></script>
<script type="text/javascript" src="{{ asset('js/mybox.js') }}"></script>
<script>

$(document).ready(function() {

    var Qte = parseInt("{{app.session.get("ticket_qte")}}");
    var formSelector = "#drdoh_ticketbundle_ticket_";
    var items = ["full" , "child" , "baby" , "older" , "discount" ];
    var labels = ["lastName","firstName","birthDate","discount","country",]

    formGenerator.init(Qte,formSelector,labels);
        
    })

</script>


{% endblock %}

    
